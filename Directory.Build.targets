<Project>
	<PropertyGroup Condition="'$(GenerateSarif)'!=''">
		<AfterClCompileTargets>$(AfterClCompileTargets);CollectSarifFiles</AfterClCompileTargets>
	</PropertyGroup>

	<Target Name="CollectSarifFiles" AfterTargets="ClCompile">
		<CreateItem Include="$(IntDir)*.sarif">
			<Output TaskParameter="Include" ItemName="MyFilesToCopy" />
		</CreateItem>

		<Message Text="Copying Sarif Files..." />
		<Copy SourceFiles="@(MyFilesToCopy)" DestinationFolder="$(SolutionDir)sarif" ContinueOnError="true" />
	</Target>
</Project> 